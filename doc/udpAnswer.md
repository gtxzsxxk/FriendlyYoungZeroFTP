# UDP Answer: 如何使用 UDP 编写聊天软件

## 回答

UDP是无连接的协议，即不能保证报文到达的时序与可靠性。使用 UDP 编写聊天软件，如果不考虑过多的干扰，仅仅在题目给定的两个程序之间通信的理想条件下进行规划，那么只需要使用操作系统提供的 `socket` 接口，编写一个 `P2P` 的程序。该程序使用操作系统提供的 `udp socket` 接口，主线程使用 GUI 与用户交互，第一个线程进行数据接收，第二个线程进行数据发送。

在实际的编程过程中，接收线程需要持续地监听套接字，使用 `recvfrom` 函数接收来自对方的消息。接收到消息后，通过线程间通信机制（如队列、信号量等）将消息传递给 GUI 线程，供用户查看。发送线程则从 GUI 线程获取用户输入的消息，使用 `sendto` 函数将其发送到对方的 IP 地址和端口。UDP 协议本身不保证消息的可靠传输，如果需要提高通信的可靠性，可以在应用层实现确认机制，例如在发送消息后等待对方的回复，确认消息已成功接收。
